name: Code Style Fixes

on:
    push:
        branches:
          - main
    pull_request:
        branches:
          - main

jobs:
    lint:
        name: Code Style Fixes
        runs-on: ubuntu-22.04

        steps:
            - name: Checkout
              uses: actions/checkout@v3

            - name: Set up PHP
              uses: shivammathur/setup-php@v2
              with:
                  php-version: '8.3'

            - name: Install dependencies
              run : composer install --ansi --no-progress

            - name: Install Pint
              run: composer global require laravel/pint

            - name: Run Pint
              run: cd backend && pint

            - name: Commit linted files
              uses: stefanzweifel/git-auto-commit-action@v5
              with:
                commit_message: "Fixes coding style"